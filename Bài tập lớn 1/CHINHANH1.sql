--------------------------------------------------
----  Note: Use user sys to run this script   ----
--------------------------------------------------

alter session set "_ORACLE_SCRIPT"=true;

------------------- Create user 
CREATE USER CHINHANH1 IDENTIFIED BY CHINHANH1;
GRANT CONNECT, RESOURCE TO CHINHANH1;
GRANT UNLIMITED TABLESPACE TO CHINHANH1;

------------------- Create table
CREATE TABLE CHINHANH1.BRANCHES(
    BRANCH_ID VARCHAR2(10) PRIMARY KEY,
    BRANCH_NAME VARCHAR2(50) NOT NULL,
    BRANCH_ADDRESS VARCHAR2(200) NOT NULL
);

CREATE TABLE CHINHANH1.PRODUCTS(
    PRODUCT_ID VARCHAR2(10) PRIMARY KEY,
    PRODUCT_NAME VARCHAR2(50) NOT NULL,
    PRODUCT_PRICE NUMBER NOT NULL, 
    PRODUCT_DESCRIPTION VARCHAR2(200) NOT NULL,
    PRODUCT_TYPE VARCHAR2(50) NOT NULL,
    warranty_period NUMBER NOT NULL --SỐ tháng hạn bảo hành
);

CREATE TABLE CHINHANH1.CUSTOMERS(
    CUS_ID VARCHAR2(10) PRIMARY KEY,
    CUS_NAME VARCHAR2(50) NOT NULL,
    CUS_PHONE VARCHAR2(50) NOT NULL,
    CUS_GENDER VARCHAR2(10) NOT NULL,
    CUS_ADDRESS VARCHAR2(200) NOT NULL,
    BRANCH_ID VARCHAR2(10) NOT NULL,
    CONSTRAINT FK_BRANCH_ID_CUS FOREIGN KEY (BRANCH_ID) REFERENCES  CHINHANH1.BRANCHES(BRANCH_ID)
);

CREATE TABLE  CHINHANH1.EMPLOYEES(
    EMP_ID VARCHAR2(10) PRIMARY KEY,
    EMP_NAME VARCHAR2(50) NOT NULL,
    EMP_PHONE VARCHAR2(50) NOT NULL,
    EMP_DOB DATE NOT NULL, --date of birth
    EMP_GENDER VARCHAR2(10) NOT NULL,
    EMP_ADDRESS VARCHAR2(200) NOT NULL,
    EMP_SALARY NUMBER NOT NULL,
    BRANCH_ID VARCHAR2(10) NOT NULL,
    CONSTRAINT FK_BRANCH_ID_EMP FOREIGN KEY (BRANCH_ID) REFERENCES  CHINHANH1.BRANCHES(BRANCH_ID)
);

CREATE TABLE  CHINHANH1.ORDERS(
    ORDER_ID NUMBER PRIMARY KEY,
    CUS_ID VARCHAR2(10) NOT NULL,
    ORDER_DATE DATE NOT NULL,
    BRANCH_ID VARCHAR2(10) NOT NULL,
    EMPLOYEE_ID VARCHAR2(10) NOT NULL,
    TOTAL_PRICE NUMBER NOT NULL,
    CONSTRAINT FK_CUS_ID_ORDER FOREIGN KEY (CUS_ID) REFERENCES  CHINHANH1.CUSTOMERS(CUS_ID),
    CONSTRAINT FK_BRANCH_ID_ORDER FOREIGN KEY (BRANCH_ID) REFERENCES  CHINHANH1.BRANCHES(BRANCH_ID),
    CONSTRAINT FK_EMPLOYEE_ID_ORDER FOREIGN KEY (EMPLOYEE_ID) REFERENCES  CHINHANH1.EMPLOYEES(EMP_ID)
);

CREATE TABLE  CHINHANH1.ORDER_DETAILS(
    ORDER_ID NUMBER NOT NULL,
    PRODUCT_ID VARCHAR2(10) NOT NULL,
    QUANTITY NUMBER NOT NULL,
    PRICE NUMBER NOT NULL,
    CONSTRAINT FK_ORDER_ID_ORDERDETAIL FOREIGN KEY (ORDER_ID) REFERENCES  CHINHANH1.ORDERS(ORDER_ID),
    CONSTRAINT FK_PRODUCT_ID_ORDERDETAIL FOREIGN KEY (PRODUCT_ID) REFERENCES  CHINHANH1.PRODUCTS(PRODUCT_ID)
);

CREATE TABLE  CHINHANH1.WAREHOUSE_MANAGER(
    BRANCH_ID VARCHAR2(10) NOT NULL,
    PRODUCT_ID VARCHAR2(10) NOT NULL,
    DATE_UPDATE DATE NOT NULL,
    QUANTITY NUMBER NOT NULL,
    ManufactureDate date NOT NULL,
    CONSTRAINT PK_WAREHOUSE_MAN PRIMARY KEY (BRANCH_ID, PRODUCT_ID, DATE_UPDATE),
    CONSTRAINT FK_BRANCH_ID_MAN FOREIGN KEY (BRANCH_ID) REFERENCES  CHINHANH1.BRANCHES(BRANCH_ID),
    CONSTRAINT FK_PRODUCT_ID_MAN FOREIGN KEY (PRODUCT_ID) REFERENCES  CHINHANH1.PRODUCTS(PRODUCT_ID)
);

CREATE TABLE  CHINHANH1.WAREHOUSE_SALER(
    BRANCH_ID VARCHAR2(10) NOT NULL,
    PRODUCT_ID VARCHAR2(10) NOT NULL,
    PRODUCT_STATUS NUMBER NOT NULL, -- 1 là còn hàng, 0 là hết hàng
    CONSTRAINT FK_BRANCH_ID_SALE FOREIGN KEY (BRANCH_ID) REFERENCES  CHINHANH1.BRANCHES(BRANCH_ID),
    CONSTRAINT FK_PRODUCT_ID_SALE FOREIGN KEY (PRODUCT_ID) REFERENCES  CHINHANH1.PRODUCTS(PRODUCT_ID)
);


------------------- Trigger
-- Tạo trigger tự động thêm dữ liệu vào bảng WAREHOUSE_SALER khi có dữ liệu thêm vào bảng CHINHANH1.WAREHOUSE_MANAGER
CREATE OR REPLACE TRIGGER trg_warehouse_manager
AFTER INSERT ON  CHINHANH1.WAREHOUSE_MANAGER
FOR EACH ROW
DECLARE
    v_product_status NUMBER;
BEGIN
    -- Đặt giá trị cho v_product_status tùy thuộc vào điều kiện nào đó
    -- Trong ví dụ này, giả sử nếu QUANTITY > 0 thì PRODUCT_STATUS = 1, ngược lại PRODUCT_STATUS = 0
    IF :NEW.QUANTITY > 0 THEN
        v_product_status := 1;
    ELSE
        v_product_status := 0;
    END IF;

    INSERT INTO  CHINHANH1.WAREHOUSE_SALER VALUES (:NEW.BRANCH_ID, :NEW.PRODUCT_ID, v_product_status);
END;
/
CREATE OR REPLACE TRIGGER UPDATE_TOTAL_PRICE
BEFORE INSERT OR UPDATE OR DELETE ON CHINHANH1.ORDER_DETAILS
FOR EACH ROW
DECLARE
    v_total_price NUMBER;
BEGIN
    -- Tính tổng tiền cho order hiện tại
    SELECT NVL(SUM(QUANTITY * PRICE), 0) INTO v_total_price
    FROM CHINHANH1.ORDER_DETAILS
    WHERE ORDER_ID = :NEW.ORDER_ID;

    -- Cập nhật tổng tiền vào bảng ORDERS
    IF INSERTING THEN
        UPDATE CHINHANH1.ORDERS
        SET TOTAL_PRICE = v_total_price + :NEW.PRICE* :NEW.QUANTITY
        WHERE ORDER_ID = :NEW.ORDER_ID;
    ELSIF UPDATING THEN
        UPDATE CHINHANH1.ORDERS
        SET TOTAL_PRICE = v_total_price - :OLD.PRICE* :OLD.QUANTITY + :NEW.PRICE*:NEW.QUANTITY
        WHERE ORDER_ID = :NEW.ORDER_ID;
    ELSE
        UPDATE CHINHANH1.ORDERS
        SET TOTAL_PRICE = v_total_price - :OLD.PRICE* :OLD.QUANTITY
        WHERE ORDER_ID = :NEW.ORDER_ID;
    END IF;
END;
/

--
CREATE OR REPLACE TRIGGER SET_PRICE_BEFORE_INSERT
BEFORE INSERT ON CHINHANH1.ORDER_DETAILS
FOR EACH ROW
BEGIN
    -- Lấy giá trị PRODUCT_PRICE từ bảng PRODUCTS
    SELECT PRODUCT_PRICE INTO :NEW.PRICE
    FROM CHINHANH1.PRODUCTS
    WHERE PRODUCT_ID = :NEW.PRODUCT_ID;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        -- Xử lý trường hợp không tìm thấy sản phẩm
        :NEW.PRICE := NULL;
END;
/


------------------- Insert data
INSERT INTO  CHINHANH1.BRANCHES VALUES ('CN1', 'Chi nhanh 1', 'Hang Thuyen, Linh Trung, Thu Duc');

INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH1', 'Nguyen Van An', '0345215875', 'Nam', 'Quan 7, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH2', 'Tran Phuoc Thinh', '0315220145', 'Nam', 'Quan 2, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH3', 'Pham Thi Bao Anh', '091245111', 'Nu', 'Thu Duc, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH4', 'Tran Thi Kim Anh', '0321555124', 'Nu', 'Binh Thanh, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH5', 'Ha Van Hung', '0344845784', 'Nam', 'Quan 3, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH6', 'Bui Bao Bich', '035929791', 'Nu', 'Quan 2, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH7', 'Nguyen Thi Thuy', '036628823', 'Nu', 'Linh Trung, Thu Duc, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH8', 'Nguyen Van Thanh', '0358475477', 'Nam', 'Linh Xuan, Thu Duc, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH9', 'Nguyen Hai Tu', '0315781111', 'Nam', 'Quan 9, TP.HCM', 'CN1');
INSERT INTO  CHINHANH1.CUSTOMERS VALUES ('KH10', 'Huynh Thi Kieu Diem', '0358475477', 'Nu', 'Quan 7, TP.HCM', 'CN1');

INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV1', 'Le Minh Chanh', '0345215875', TO_DATE('05-10-2003', 'DD-MM-YYYY'),'Nam', 'Di An, Binh Duong', 30000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV2', 'Tran Van Huynh Phuong', '0987654321', TO_DATE('15-05-1985', 'DD-MM-YYYY'),'Nam', 'Quan 1, TP.HCM', 10000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV3', 'Nguyen Thị Thuy Hien', '0912345678', TO_DATE('20-11-1992', 'DD-MM-YYYY'),'Nu', 'Quan 2, TP.HCM', 5000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV4', 'Pham Thanh Cong', '0123456789', TO_DATE('08-03-1988', 'DD-MM-YYYY'),'Nam', 'Quan 3, TP.HCM', 20000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV5', 'Dao Huy Hoang', '0978765432', TO_DATE('10-07-1995', 'DD-MM-YYYY'),'Nam', 'Quan 4, TP.HCM', 15000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV6', 'Van Thi Thuy Hang', '0901122334', TO_DATE('12-12-1990', 'DD-MM-YYYY'),'Nu', 'Quan 5, TP.HCM', 8000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV7', 'Nguyen Van Khanh', '0988777666', TO_DATE('01-01-1991', 'DD-MM-YYYY'),'Nam', 'Quan 6, TP.HCM', 9000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV8', 'Nguyen Thi Hang Nga', '0911223344', TO_DATE('02-02-1992', 'DD-MM-YYYY'),'Nu', 'Quan 7, TP.HCM', 11000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV9', 'Le Van Hai', '0988777666', TO_DATE('03-03-1993', 'DD-MM-YYYY'),'Nam', 'Quan 8, TP.HCM', 11000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV10', 'Nguyen Thi Huong Giang', '0901122334', TO_DATE('04-04-1994', 'DD-MM-YYYY'),'Nu', 'Quan 9, TP.HCM', 12000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV11', 'Vo Van Duc Thinh', '0988777666', TO_DATE('05-05-1995', 'DD-MM-YYYY'),'Nam', 'Quan 10, TP.HCM', 7000000, 'CN1');
INSERT INTO  CHINHANH1.EMPLOYEES VALUES ('NV12', 'Do Thi Ngoc Tram', '0911223344', TO_DATE('06-06-1996', 'DD-MM-YYYY'),'Nu', 'Quan 11, TP.HCM', 7100000, 'CN1');


INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P1',  'Tivi LED 4K 55 inch', 12000000, 'Tivi LED 4K 55 inch, Smart TV', 'Tivi', 24);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P2',  'Máy Lạnh Inverter 1.5HP', 8500000, 'Máy lạnh Inverter công nghệ mới', 'Điện lạnh', 36);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P3',  'Tủ Lạnh Side by Side', 18000000, 'Tủ lạnh Side by Side, dung tích 600L', 'Điện lạnh', 24);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P4',  'Máy Giặt Front Load 8kg', 9500000, 'Máy giặt công suất lớn, tiết kiệm năng lượng', 'Gia dụng', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P5',  'Bếp Điện Từ 2 Bếp', 3500000, 'Bếp điện từ 2 bếp, chống trào ngược', 'Bếp', 18);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P6',  'Quạt Điện Cột', 800000, 'Quạt cột, 3 tốc độ', 'Điện gia dụng', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P7',  'Máy Xay Cà Phê', 1200000, 'Máy xay cà phê chuyên nghiệp', 'Pha cà phê', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P8',  'Lò Nướng Điện 32L', 2800000, 'Lò nướng điện dung tích lớn', 'Bếp', 24);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P9',  'Máy Hút Bụi Robot', 3500000, 'Máy hút bụi tự động, thông minh', 'Điện gia dụng', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P10', 'Máy Pha Cà Phê Espresso', 5500000, 'Máy pha cà phê espresso chuyên nghiệp', 'Pha cà phê', 18);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P11', 'Điều Hòa Inverter 2HP', 10500000, 'Điều hòa Inverter công nghệ mới', 'Điện lạnh', 36);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P12', 'Bình Đun Nước Siêu Tốc', 350000, 'Bình đun nước siêu tốc, tự động tắt khi sôi', 'Điện gia dụng', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P13', 'Máy Ép Trái Cây', 2200000, 'Máy ép trái cây chất lượng cao', 'Điện gia dụng', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P14', 'Tủ Sấy Quần Áo', 2000000, 'Tủ sấy quần áo, công nghệ làm khô nhanh', 'Điện gia dụng', 24);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P15', 'Bàn Là Hơi Nước', 1200000, 'Bàn là hơi nước chất lượng cao', 'Gia dụng', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P16', 'Đèn LED Trang Trí', 500000, 'Đèn LED trang trí nhiều màu sắc', 'Đèn', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P17', 'Loa Bluetooth Di Động', 800000, 'Loa Bluetooth di động, âm thanh sống động', 'Âm thanh', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P18', 'Máy Sấy Tóc Ion', 450000, 'Máy sấy tóc ion, bảo vệ tóc khỏi hư tổn', 'Điện gia dụng', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P19', 'Ổ Cắm Điện Thông Minh', 250000, 'Ổ cắm điện thông minh, điều khiển từ xa', 'Điện gia dụng', 12);
INSERT INTO CHINHANH1.PRODUCTS VALUES   ('P20', 'Quạt Đứng Cao Cấp', 1200000, 'Quạt đứng cao cấp, chế độ gió tự nhiên', 'Điện gia dụng', 24);

INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P1' , TO_DATE('15-01-2023', 'DD-MM-YYYY'), 500, TO_DATE('01-01-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P2' , TO_DATE('20-02-2023', 'DD-MM-YYYY'), 300, TO_DATE('01-02-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P3' , TO_DATE('10-03-2023', 'DD-MM-YYYY'), 0, TO_DATE('01-03-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P4' , TO_DATE('05-04-2023', 'DD-MM-YYYY'), 250, TO_DATE('01-04-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P5' , TO_DATE('12-05-2023', 'DD-MM-YYYY'), 600, TO_DATE('01-05-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P6' , TO_DATE('18-06-2023', 'DD-MM-YYYY'), 350, TO_DATE('01-06-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P7' , TO_DATE('01-07-2023', 'DD-MM-YYYY'), 450, TO_DATE('01-07-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P8' , TO_DATE('14-08-2023', 'DD-MM-YYYY'), 0, TO_DATE('01-08-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P9' , TO_DATE('30-09-2023', 'DD-MM-YYYY'), 550, TO_DATE('01-09-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P10' , TO_DATE('22-10-2023', 'DD-MM-YYYY'), 280, TO_DATE('01-10-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P11' , TO_DATE('17-11-2023', 'DD-MM-YYYY'), 380, TO_DATE('01-11-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P12' , TO_DATE('05-12-2023', 'DD-MM-YYYY'), 420, TO_DATE('01-12-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P13' , TO_DATE('08-01-2023', 'DD-MM-YYYY'), 330, TO_DATE('01-01-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P14' , TO_DATE('14-02-2023', 'DD-MM-YYYY'), 480, TO_DATE('01-02-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P15' , TO_DATE('19-03-2023', 'DD-MM-YYYY'), 0, TO_DATE('01-03-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P16' , TO_DATE('25-04-2023', 'DD-MM-YYYY'), 370, TO_DATE('01-04-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P17' , TO_DATE('30-05-2023', 'DD-MM-YYYY'), 500, TO_DATE('01-05-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P18' , TO_DATE('10-06-2023', 'DD-MM-YYYY'), 26, TO_DATE('01-06-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P19' , TO_DATE('15-07-2023', 'DD-MM-YYYY'), 43, TO_DATE('01-07-2022', 'DD-MM-YYYY'));
INSERT INTO  CHINHANH1.WAREHOUSE_MANAGER VALUES ('CN1','P20' , TO_DATE('20-08-2023', 'DD-MM-YYYY'), 29, TO_DATE('01-08-2022', 'DD-MM-YYYY'));

-- Dữ liệu cho bảng CHINHANH1.ORDERS
INSERT INTO  CHINHANH1.ORDERS VALUES (1, 'KH1', TO_DATE('01-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV1', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (2, 'KH2', TO_DATE('02-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV2', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (3, 'KH3', TO_DATE('03-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV3', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (4, 'KH4', TO_DATE('04-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV4', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (5, 'KH5', TO_DATE('05-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV5', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (6, 'KH6', TO_DATE('06-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV6', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (7, 'KH7', TO_DATE('07-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV7', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (8, 'KH8', TO_DATE('08-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV8', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (9, 'KH9', TO_DATE('09-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV9', 0);
INSERT INTO  CHINHANH1.ORDERS VALUES (10, 'KH10', TO_DATE('10-01-2023', 'DD-MM-YYYY'), 'CN1', 'NV10', 0);

-- Dữ liệu cho bảng CHINHANH1.ORDER_DETAILS
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (1, 'P1', 5, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (1, 'P2', 3, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (2, 'P3', 2, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (2, 'P4', 4, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (3, 'P5', 6, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (3, 'P6', 2, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (4, 'P7', 3, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (4, 'P8', 1, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (5, 'P9', 5, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (5, 'P10', 2, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (6, 'P11', 4, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (6, 'P12', 3, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (7, 'P13', 2, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (7, 'P14', 5, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (8, 'P15', 3, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (8, 'P16', 2, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (9, 'P17', 4, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (9, 'P18', 3, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (10, 'P19', 2, 0);
INSERT INTO  CHINHANH1.ORDER_DETAILS VALUES (10, 'P20', 5, 0);

------------------- Create user
CREATE USER DIRECTOR IDENTIFIED BY DIRECTOR;
GRANT CONNECT, CREATE PUBLIC DATABASE LINK TO DIRECTOR;
GRANT SELECT, INSERT, UPDATE, DELETE ON CHINHANH1.BRANCHES TO DIRECTOR;
GRANT SELECT, INSERT, UPDATE, DELETE ON CHINHANH1.PRODUCTS TO DIRECTOR;
GRANT SELECT, INSERT, UPDATE, DELETE ON CHINHANH1.CUSTOMERS TO DIRECTOR;
GRANT SELECT, INSERT, UPDATE, DELETE ON CHINHANH1.EMPLOYEES TO DIRECTOR;
GRANT SELECT ON CHINHANH1.ORDERS TO DIRECTOR;
GRANT SELECT ON CHINHANH1.ORDER_DETAILS TO DIRECTOR;
GRANT SELECT, INSERT, UPDATE, DELETE ON CHINHANH1.WAREHOUSE_MANAGER TO DIRECTOR;
GRANT SELECT, INSERT, UPDATE, DELETE ON CHINHANH1.WAREHOUSE_SALER TO DIRECTOR;

CREATE USER WAREHOUSE_MANAGER IDENTIFIED BY WAREHOUSE_MANAGER;
GRANT CONNECT TO WAREHOUSE_MANAGER;
GRANT SELECT ON CHINHANH1.BRANCHES TO WAREHOUSE_MANAGER;
GRANT SELECT, INSERT, UPDATE ON CHINHANH1.PRODUCTS TO WAREHOUSE_MANAGER;
GRANT SELECT, INSERT, UPDATE, DELETE ON CHINHANH1.WAREHOUSE_MANAGER TO WAREHOUSE_MANAGER;
GRANT SELECT, INSERT, UPDATE, DELETE ON CHINHANH1.WAREHOUSE_SALER TO WAREHOUSE_MANAGER;

CREATE USER EMPLOYEE IDENTIFIED BY EMPLOYEE;
GRANT CONNECT TO EMPLOYEE;
GRANT SELECT ON CHINHANH1.BRANCHES TO EMPLOYEE;
GRANT SELECT ON CHINHANH1.PRODUCTS TO EMPLOYEE;
GRANT SELECT ON CHINHANH1.CUSTOMERS TO EMPLOYEE;
GRANT SELECT ON CHINHANH1.ORDERS TO EMPLOYEE;
GRANT SELECT ON CHINHANH1.ORDER_DETAILS TO EMPLOYEE;
GRANT SELECT ON CHINHANH1.WAREHOUSE_SALER TO EMPLOYEE;

------------------- Create database link by SERVICE_NAME:       CHINHANH_01_02
CREATE DATABASE LINK DIRECTOR_LINK CONNECT TO DIRECTOR IDENTIFIED BY DIRECTOR USING 'CHINHANH_01_02';
CREATE DATABASE LINK WAREHOUSE_MANAGER_LINK CONNECT TO WAREHOUSE_MANAGER IDENTIFIED BY WAREHOUSE_MANAGER USING 'CHINHANH_01_02';
CREATE DATABASE LINK EMPLOYEE_LINK CONNECT TO EMPLOYEE IDENTIFIED BY EMPLOYEE USING 'CHINHANH_01_02';





------------------- Other command

SELECT * FROM CHINHANH1.CUSTOMERS;
SELECT * FROM CHINHANH1.EMPLOYEES;
SELECT * FROM CHINHANH1.BRANCHES;
SELECT * FROM CHINHANH1.ORDERS;
SELECT * FROM CHINHANH1.ORDER_DETAILS;
SELECT * FROM CHINHANH1.PRODUCTS;
SELECT * FROM CHINHANH1.WAREHOUSE_MANAGER;
SELECT * FROM CHINHANH1.WAREHOUSE_SALER;


DROP TABLE CHINHANH1.WAREHOUSE_MANAGER CASCADE CONSTRAINTS;
DROP TABLE CHINHANH1.WAREHOUSE_SALER CASCADE CONSTRAINTS;
DROP TABLE CHINHANH1.ORDER_DETAILS CASCADE CONSTRAINTS;
DROP TABLE CHINHANH1.ORDERS CASCADE CONSTRAINTS;
DROP TABLE CHINHANH1.EMPLOYEES CASCADE CONSTRAINTS;
DROP TABLE CHINHANH1.CUSTOMERS CASCADE CONSTRAINTS;
DROP TABLE CHINHANH1.PRODUCTS CASCADE CONSTRAINTS;
DROP TABLE CHINHANH1.BRANCHES CASCADE CONSTRAINTS;